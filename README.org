#+TITLE: delve.el

Delve is a tool to delve into your [[https://github.com/org-roam/org-roam][org roam zettelkasten]]. Currently,
you can browse your zettelkasten by tag, or use one of the predefined
searches. Delve inherits and extends the functionality from the now
deprecated [[https://github.com/publicimageltd/org-roam-dashboard][org-roam-dashboard]].

[[./screenshot_last_modified.png]]

* Features

Note that this is still a work in progress. See [[#bugs--problems--untested-stuff]] below.

 - Display lists of org roam pages (=Zettel) with additional
   information on backlinks, "tolinks", and modification date.
 - Expand the Zettel item (page) to see backlinks, or links pointing
   to the zettel, or both.
 - Interactively browse the Zettelkasten according to predefined
   searches (Last ten modified pages; top linked pages; etc.)
 - Visit the Zettel at point to edit it. Delve provides an interactive
   command to switch back and forth between the Delve buffers and the
   org roam buffers.
 - Remote editing: From within the tree view, add or remove tags.
 - Additional minor mode (delve-minor-mode) for org roam pages,
   allowing to open a new Delve buffer with the current org roam page
   as top item.

* Installation

** Basic Installation

Delve depends on another tool of mine called [[https://github.com/publicimageltd/lister][lister]]. But neither
package is available at melpa yet. So you have to download both packes
(delve and lister) in order to make this work:

  #+begin_src emacs-lisp
(use-package lister
  :quelpa (lister :fetcher git
  		  :url "https://github.com/publicimageltd/lister"))

(use-package delve
  :quelpa (delve :fetcher git 
		 :url "https://github.com/publicimageltd/delve")
  :config
  (use-package delve-minor-mode
    :config
    (add-hook 'org-mode-hook #'delve-minor-mode-maybe-activate))
  :bind
  (("<f12>" . delve-open-or-select)))

  #+end_src

This snippet above also installs the =delve-minor-mode=. It is a local
minor mode which is only activated if the org mode file visited
belongs to the org roam database (e.g., is placed with in the org roam
directory). See [[#delve--minor--mode]] below.

** Further Configuration
 
For pretty icons, install [[https://github.com/domtronn/all-the-icons.el][all-the-icons.el]].

* Keybindings

** Delve 

Use the usual navigation keys. Additionally, the following keys apply:

| Key   | Function                                                   |
|-------+------------------------------------------------------------|
| ENTER | Visit Zettel at point                                      |
| TAB   | Expand on Zettel or search at point, or hide it            |
| LEFT  | Insert list with all backlinks pointing to Zettel at point |
| RIGHT | Insert list with all links in the Zettel at point          |
| +     | Add tag to the Zettel at point                             |
| -     | Remove tag from the Zettel at point                        |
| g     | Refresh the buffer contents                                |
| .     | Refresh the item at point                                  |
| C-l   | Replace current list with the expanded Zettel at point     |
| r     | Revert buffer to the original list                         |
|-------+------------------------------------------------------------|

** Delve minor mode

This is a local minor mode which adds some convenience key bindings to
the org roam page buffer.

| Key | Function                                                                 |
|-----+--------------------------------------------------------------------------|
| d   | Open a new delve buffer with the current page as top item, and expand it |
| +   | Add a tag                                                                |
| -   | Remove a tag                                                             |
|-----+--------------------------------------------------------------------------|



* Bugs / Problems / Untested Stuff

 - *Aliases* are not recognized. Sometimes this leads to undesireable
   results, because you just see the Zettel with the same title listed
   twice or even more often. An algorithm to effectively identify
   duplicates is on the way.
 - There is a general problem with *duplicate items*, not related to
   aliases, which I could not track them down yet.
 - You can currently *mark* items ('m') and unmark them all ('u). But
   you can't do anything with the marked items yet.
 
